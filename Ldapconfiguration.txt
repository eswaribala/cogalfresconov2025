#run ldap server
docker run -d -p 389:10389 openfrontier/apacheds

#to configure user, download ldap studio
https://directory.apache.org/studio/download/download-windows.html
#get window 64 installer

#Open your Apache Directory Studio‚Å† and create a new ldap connection to 
#host name
localhost
uid=admin,ou=system as the BindDN 
secret as the bind BindPassword.

#once the connection successful
#go to Apacheds server, create the server
#double click on server
#select partition tab
#in parttion add new partition
partition id : sevenses
suffix : o=sevenseas

#we have to download repository jar file
#go to acs container
#usr/local/tomcat/webapps/alfresco/WEB-INF/lib

#copy jar file from container
#go to alfresco training folder
docker cp <acscontainerid>:/usr/local/tomcat/webapps/alfresco/WEB-INF/lib/alfresco-repository-25.2.0.64.jar .
#rename jar file to zip file
#extract the zip
#create a copy of the folder
docker cp alfresco-repository-25.2.0.64-Copy <acscontainerid>:/usr/local/tomcat/webapps/alfresco/WEB-INF/lib

#modify ldap properties
#go to acs container
#reach /usr/local/tomcat/shared/classes/alfresco-global.properties
#add the following
ldap.authentication.active=true
authentication.chain=localLDAP:ldap,alfrescoNtlm1:alfrescoNtlm
#ldap.authentication.allowGuestLogin=false
ldap.authentication.userNameFormat=cn=%s,ou=people,o=sevenseas
ldap.authentication.java.naming.provider.url=ldap://host.docker.internal:389
ldap.synchronization.active=true
ldap.synchronization.java.naming.security.principal=uid\=admin,ou\=system
ldap.synchronization.java.naming.security.credentials=secret
ldap.synchronization.groupQuery=(objectclass\=groupOfUniqueNames)
ldap.synchronization.personQuery=(objectclass\=person)
ldap.synchronization.groupSearchBase=ou\=groups,o\=sevenseas
ldap.synchronization.userSearchBase=ou\=people,o\=sevenseas
ldap.synchronization.groupMemberAttributeName=uniquemember
